# Next.js フロントエンド開発 要件定義書 (MVP)

## 1. プロジェクト概要

本プロジェクトは、ユーザーが画像をアップロードし、その画像をAI（n8n経由）で解析し、解析結果のテキストをフロントエンドに表示するMVPアプリケーションの開発を目的とします。将来的には機能拡張を想定していますが、まずはコア機能の実装に注力します。

## 2. MVPのスコープ

### 2.1. 必須機能 (Must-Have)

#### 2.1.1. 画像アップロード機能

- **ファイル入力:** ユーザーがローカルデバイスから画像ファイル（PNG, JPEG/JPG, GIF）を選択できる入力フィールドを提供します。
- **ドラッグ＆ドロップ:** 画像ファイルを指定エリアにドラッグ＆ドロップしてアップロードできる機能を提供します。
- **ファイルプレビュー:** 選択された画像のサムネイルをアップロード前に表示します。
- **ファイルサイズ制限:** アップロードできる画像ファイルは最大**5MB**とします。（※n8nおよびAIサービスの制限に応じて調整の可能性あり）
- **ファイル形式制限:** PNG, JPEG/JPG, GIF形式のみを許可します。

#### 2.1.2. 画像解析リクエスト機能

- **アップロードボタン:** 画像選択後に解析をトリガーするための明確なボタン（例: 「解析を開始」）を提供します。
- **API連携:** 選択された画像を`multipart/form-data`形式でn8nのWebhookエンドポイントにHTTP `POST`リクエストで送信します。
- **ローディング表示:** リクエスト送信中、ユーザーに処理中であることを視覚的に伝えます（例: スピナー、ボタンの無効化）。

#### 2.1.3. 解析結果表示機能

- **結果表示エリア:** n8nから返されたAIによる画像解析結果のテキストを表示するエリアを提供します。
- **エラーメッセージ:** n8nとの通信エラーやAIからの解析エラーが発生した場合、ユーザーフレンドリーなエラーメッセージを表示します。

### 2.2. 非必須機能 (Nice-to-Have / MVP後検討)

- **ユーザー認証/ログイン機能:** 特定のユーザーのみが利用できるようにする。
- **解析履歴:** 過去に解析した画像の履歴とその結果を保存・表示する。
- **複数画像の一括解析:** 一度に複数の画像をアップロードして解析する。
- **解析結果のコピー機能:** 表示されたテキストをクリップボードにコピーするボタン。
- **レスポンシブデザインの強化:** PCだけでなく、タブレットやスマートフォンでの表示最適化。
- **デザインテーマの選択:** ライト/ダークモードの切り替え。

## 3. 技術スタック

- **フロントエンドフレームワーク:** **Next.js** (最新の安定版)
- **UIライブラリ (任意):** Tailwind CSS, Material-UI, Chakra UI など、生成AIが扱いやすいものや、開発速度を向上させるものを選択（例: **Tailwind CSS**）
- **画像アップロードコンポーネント:** 既存のライブラリ（React Dropzoneなど）の利用も検討
- **HTTPクライアント:** `fetch` API または Axios
- **AI生成ツール:** 本要件定義書に基づき、コード生成を行うAIツール（例: ChatGPT, Claude, Geminiなど）

## 4. 開発環境・デプロイ

- **開発環境:** Node.js, npm/yarn
- **デプロイ先:** Vercel, Netlify など、Next.jsに最適化されたプラットフォーム

## 5. パフォーマンス要件

- **初期ロード時間:** 許容可能な範囲（FCP < 2.5秒を目標）
- **画像解析レスポンス時間:** n8nおよびAIサービスの応答時間に依存しますが、フロントエンド側での表示までの遅延は最小限に抑えます。

## 6. セキュリティ要件

- **CORS (Cross-Origin Resource Sharing):** n8n側でフロントエンドのオリジンからのリクエストを許可するように設定します。
- **APIキーの管理:** フロントエンドに直接APIキーを埋め込まないよう注意します（今回のケースではn8nがAPIキーを管理するため、フロントエンドは直接AIサービスと通信しません）。

## 7. ユーザーインターフェース (UI) / ユーザーエクスペリエンス (UX)

- **シンプルさ:** 直感的で迷わないシンプルなインターフェースを心がけます。
- **視覚的フィードバック:** アップロード中、解析中、エラー発生時など、ユーザーに状況が明確に伝わるようにします。

## 8. その他

- **生成AIの活用:** 本要件定義書に基づいて、Next.jsコンポーネント、ロジック、スタイリングなど、可能な限り多くの部分を生成AIで作成することを前提とします。
- **コードのレビュー:** 生成されたコードは、可読性、保守性、セキュリティの観点から適宜人間がレビューを行います。